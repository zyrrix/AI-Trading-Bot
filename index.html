<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Simulated AI Trading Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
  />

  <!-- Chart.js for Market Chart -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Your CSS -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <!-- HEADER -->
    <div class="header-row">
      <div>
        <h1>Simulated AI Trading Lab</h1>
        <p class="subtitle">
          Visual sandbox for experimenting with automated strategy logic —
          <strong>no real funds, no real trades.</strong>
        </p>
      </div>
      <div class="header-right">
        <div class="bot-pill">
          <span class="pulse-dot"></span>
          AI Strategy Engine • Demo
        </div>
      </div>
    </div>

    <!-- NAV BAR -->
    <nav class="top-nav">
      <button class="nav-link active" data-section="section-trading">
        <i class="fas fa-robot"></i> Trading Bot
      </button>
      <button class="nav-link" data-section="section-market">
        <i class="fas fa-chart-line"></i> Market
      </button>
    </nav>

    <!-- WALLET BAR -->
    <div class="wallet-bar">
      <div>
        <div class="wallet-label" id="walletLabel">
          Wallet not connected
        </div>
        <div id="walletAddress" class="wallet-address"></div>
      </div>
      <div class="wallet-actions">
        <button id="connectButton" class="button-primary">
          <i class="fas fa-plug"></i>
          Connect MetaMask
        </button>
        <button id="disconnectButton" class="button-ghost" style="display:none;">
          <i class="fas fa-sign-out-alt"></i>
          Disconnect
        </button>
      </div>
    </div>

    <!-- STATUS MESSAGE (INFO / SUCCESS / ERROR) -->
    <div id="globalStatus" class="status-banner info">
      <i class="fas fa-circle-info"></i>
      <span>
        Connect your wallet (read-only) and configure the bot to start the simulation.
      </span>
    </div>

    <!-- TRADING BOT SECTION -->
    <section id="section-trading" class="page-section active">
      <!-- TOP DASHBOARD: VOLATILITY + BOT STATUS -->
      <div class="dashboard-grid">
        <!-- Market Regime & Volatility -->
        <div class="card">
          <div class="card-title">
            <i class="fas fa-wave-square"></i>
            Market Regime & Volatility
          </div>
          <div id="volValue" class="card-main-value">16.1%</div>
          <div id="regimeText" class="card-subtext">
            Regime: <strong>Explosive</strong> · Simulated BTC/USDT cluster
          </div>
          <div class="mini-chart">
            <div class="mini-line">
              <div class="mini-dot"></div>
            </div>
          </div>
          <div class="status-row">
            <div id="volComment" class="metric-tag">
              High volatility — tight risk management crucial.
            </div>
            <div class="metric-tag">
              Next refresh in <span id="volRefresh">3s</span>
            </div>
          </div>
        </div>

        <!-- Bot Status -->
        <div class="card">
          <div class="card-title">
            <i class="fas fa-robot"></i>
            Bot Status
          </div>
          <div id="botSnapshot" class="card-main-value">
            Idle · Awaiting configuration
          </div>
          <div class="card-subtext">
            AI engine will simulate long/short decisions based on your risk
            profile and pair selection.
          </div>
          <div class="status-row">
            <div id="statusChip" class="status-chip inactive">
              <span class="status-dot offline"></span>
              <span id="statusChipText">INACTIVE</span>
            </div>
            <div class="metric-tag">
              Last cycle: <span id="lastCycleText">–</span>
            </div>
          </div>
        </div>
      </div>

      <!-- STRATEGY CONFIG + LIVE SIMULATION -->
      <div class="strategy-section">
        <h2 class="section-title">
          <i class="fas fa-sliders-h"></i>
          Strategy Configuration
        </h2>
        <p class="section-text">
          Use this panel to configure a <strong>simulated</strong> trading bot.
          It will continuously generate fake trades, PnL and metrics so you can
          practice reading dashboards and thinking about risk — without touching
          real money.
        </p>

        <!-- Steps -->
        <div class="steps">
          <div id="step1" class="step active">
            <div class="step-number">1</div>
            Connect
          </div>
          <div id="step2" class="step">
            <div class="step-number">2</div>
            Configure
          </div>
          <div id="step3" class="step">
            <div class="step-number">3</div>
            Start Bot
          </div>
        </div>

        <!-- Inputs -->
        <div class="input-row">
          <div class="input-group">
            <label for="pairSelect">Trading Pair</label>
            <select id="pairSelect">
              <option value="BTC/USDT">BTC / USDT</option>
              <option value="ETH/USDT">ETH / USDT</option>
              <option value="SOL/USDT">SOL / USDT</option>
              <option value="LINK/USDT">LINK / USDT</option>
            </select>
            <div class="hint">
              This only affects the labels & simulated volatility profile.
            </div>
          </div>

          <div class="input-group">
            <label for="riskSelect">Risk Mode</label>
            <select id="riskSelect">
              <option value="conservative">Conservative</option>
              <option value="balanced" selected>Balanced</option>
              <option value="aggressive">Aggressive</option>
            </select>
            <div class="hint">
              Higher risk = larger swings in simulated PnL.
            </div>
          </div>

          <div class="input-group">
            <label for="capitalInput">Simulated Capital (USDT)</label>
            <input
              type="number"
              id="capitalInput"
              placeholder="e.g. 5000"
              min="100"
              step="100"
              value="5000"
            />
            <div class="hint">
              Purely cosmetic — no real funds involved.
            </div>
          </div>
        </div>

        <!-- Buttons -->
        <div class="config-buttons">
          <button id="applyConfig" class="button-primary">
            <i class="fas fa-microchip"></i>
            Apply Configuration
          </button>
          <button id="toggleBot" class="button-ghost" disabled>
            <i class="fas fa-play"></i>
            Start Bot
          </button>
        </div>

        <!-- Config Status -->
        <div id="configStatus" class="status-banner info">
          <i class="fas fa-circle-info"></i>
          <span>
            Waiting for configuration. Choose a pair, risk mode and capital,
            then click <strong>Apply Configuration</strong>.
          </span>
        </div>
      </div>

      <!-- LIVE SIMULATION -->
      <div class="strategy-section">
        <div class="trade-header-row">
          <h2 class="section-title">
            <i class="fas fa-chart-line"></i>
            Live Simulation
          </h2>
          <div class="small-row">
            <span id="livePulse" class="pulse-dot muted"></span>
            <span id="liveStatusText">Bot inactive</span>
          </div>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">Total Simulated PnL</div>
            <div id="pnlValue" class="stat-value green">+0.00%</div>
            <div id="pnlNote" class="stat-note">
              On 5,000 USDT of simulated capital.
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Win Rate & Cycles</div>
            <div id="cycleValue" class="stat-value">
              0 wins · 0 losses
            </div>
            <div class="stat-note">
              Completed cycles: <span id="cycleCount">0</span> · Sharpe (fake):
              <span id="sharpeValue">0.0</span>
            </div>
          </div>
        </div>

        <div id="tradeLog" class="trade-log"></div>

        <div class="trade-actions">
          <button id="withdrawBtn" class="button-withdraw">
            <i class="fas fa-money-bill-wave"></i>
            Simulate Withdraw
          </button>
        </div>

        <p class="fine-print">
          All numbers here are generated locally in your browser. Use this as a
          UI playground, not as trading advice.
        </p>
      </div>
    </section>

    <!-- MARKET SECTION -->
    <section id="section-market" class="page-section">
      <div class="section-header">
        <h2><i class="fas fa-chart-line"></i> Market Overview</h2>
        <p>
          Graphic and live prices of the main cryptos. Data powered by
          CoinGecko.
        </p>
      </div>

      <!-- Chart Card -->
      <div class="card">
        <div class="card-header-inline">
          <span class="card-title">
            <i class="fas fa-chart-area"></i>
            Main Crypto Price Chart (USD)
          </span>
          <span id="marketStatus" class="tag tag-info">Loading…</span>
        </div>
        <div class="card-body">
          <div class="chart-wrapper">
            <canvas id="cryptoChart"></canvas>
          </div>
        </div>
      </div>

      <!-- Table Card -->
      <div class="card">
        <div class="card-header-inline">
          <span class="card-title">
            <i class="fas fa-table"></i>
            Live Price Table
          </span>
          <button id="refreshMarketButton" class="button-ghost small">
            <i class="fas fa-rotate"></i> Refresh
          </button>
        </div>
        <div class="card-body">
          <table class="price-table">
            <thead>
              <tr>
                <th>Coin</th>
                <th>Symbol</th>
                <th>Price (USD)</th>
                <th>24h Change</th>
              </tr>
            </thead>
            <tbody id="marketTableBody">
              <tr>
                <td colspan="4" class="placeholder">Waiting for data…</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </div>

  <!-- Withdraw Modal -->
  <div id="modalBackdrop" class="modal-backdrop">
    <div class="modal">
      <h3><i class="fas fa-circle-check"></i> Withdraw Simulation</h3>
      <p>Your virtual profits have been "sent" back to the wallet.</p>
      <p>In a real implementation, this is where a secure payout flow would live.</p>
      <button id="closeModal" class="close-modal">Close</button>
    </div>
  </div>

  <!-- Your JS -->
  <script src="script.js" defer></script>
</body>
</html>
